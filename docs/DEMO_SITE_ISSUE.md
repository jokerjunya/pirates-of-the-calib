# 🎯 Epic: Web-CALIB デモサイト構築

## 📋 背景・目的

現在のWeb-CALIBスクレイピングシステムは実際のサイトでテストしているため、以下の制約があります：

- **データ数が限定的**: 実際のメールデータが少なく、大量データでのテストができない
- **パターンの不足**: 様々な送信者・受信者・件名パターンのテストが困難
- **エラーシナリオのテスト不足**: ネットワークエラーや異常データの再現が困難

## 🎯 目標

- [ ] **互換性**: 既存スクレイピングロジックが**無変更**で動作するデモサイト
- [ ] **大量データ**: 300件以内のリアルなデモメールデータ
- [ ] **完全再現**: フレームセット構造・認証フローの忠実な再現
- [ ] **多様性**: 実際のビジネスシナリオを反映した多様なメールパターン

## 🏗️ 技術仕様

### アーキテクチャ
- **Next.js API Routes** を使用（エラーが出にくく、既存プロジェクトに統合しやすい）
- 既存の型定義・ユーティリティを再利用
- ローカル開発環境で完結

### URL構造
```
http://localhost:3000/api/mock-webcalib/
├── auth/logout                           # ログイン画面（実際はlogout URL）
├── app/message_management33_list         # メール一覧画面
└── message_detail/[id]                   # メール詳細画面
```

### デモデータ仕様
- **件数**: 300件以内
- **期間**: 過去1年分の時系列データ
- **送信者パターン**: リクルートエージェント、企業担当者、システム通知など
- **件名パターン**: 面談予約、選考結果、求人紹介、システム通知など

## 📋 実装計画

### Phase 1: 基礎構築
- [ ] API Routes の骨格作成
- [ ] 基本的なHTML構造の再現
- [ ] 既存スクレイピングロジックとの互換性確認

### Phase 2: データ生成
- [ ] デモメールデータ生成スクリプト
- [ ] リアルなビジネスシナリオの反映
- [ ] 時系列・送信者パターンの多様化

### Phase 3: 完全再現
- [ ] フレームセット構造（13フレーム）の実装
- [ ] 認証フロー・セッション管理
- [ ] IE互換性・レスポンス時間の調整

### Phase 4: テスト・改善
- [ ] 大量データでの性能テスト
- [ ] エラーシナリオのシミュレーション
- [ ] 重複削除・変換精度の検証

## 🔧 開発方針

- **段階的開発**: 最小限から開始して徐々に機能拡張
- **互換性優先**: 既存コードの変更を最小限に抑制
- **リアルデータ**: 実際のビジネスシナリオに基づくデモデータ作成

## 📊 成功指標

- [ ] 既存スクレイピングが**無変更**で300件のデモデータを取得
- [ ] 重複削除率・変換精度が実データと同等以上
- [ ] 多様なエラーシナリオでの動作確認
- [ ] 開発・テスト効率の大幅向上 